<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/configuration.md at 2023-12-06
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Composum AI &#x2013; Configuration of the Composum Dashboard</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h2>Composum Dashboard</h2>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2023-12-06<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.2.15-SNAPSHOT<span class="divider">|</span></li>
      <li class=""><a href="index.html" title="Composum Dashboard">Composum Dashboard</a><span class="divider">/</span></li>
    <li class="active ">Configuration of the Composum Dashboard</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://www.ist-software.com/" class="externalLink" title="IST Gmbh Dresden">IST Gmbh Dresden</a></li>
      <li class="pull-right"><a href="http://www.composum.com/" class="externalLink" title="Composum">Composum</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li class="active"><a href="#"><span class="none"></span>Configuration</a></li>
    <li><a href="configurationAsContent.html" title="Config as content page"><span class="none"></span>Config as content page</a></li>
   <li class="nav-header">Modules</li>
    <li><a href="composum-dashboard-sling-parent/index.html" title="Composum Dashboard - Sling - reactor"><span class="none"></span>Composum Dashboard - Sling - reactor</a></li>
    <li><a href="composum-dashboard-aem-parent/index.html" title="Composum Dashboard - AEM - reactor"><span class="none"></span>Composum Dashboard - AEM - reactor</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Configuration of the Composum Dashboard</h1>
<p>There are two basic functions of the configuration:</p>
<ul>

<li>configuration which tools are available and the customization of these tools</li>
<li>configuration of the path at which the dashboard / browser / other pages are available.</li>
</ul>
<p>The first part is done via OSGI configurations as discussed below. The second part can be performed two ways:</p>
<ol style="list-style-type: decimal">

<li>in the OSGI configurations the <code>sling.servlet.paths</code> can give the paths the servlets are available.</li>
<li>a <a href="configurationAsContent.html">special content page</a> is created that arranges the necessary servlets and their views as subresources.</li>
</ol>
<p>At set of configuration examples is delivered in the &#x2018;config&#x2019; packages,
one for a Sling setup and another one for an AEM setup.</p>
<ul>

<li><a class="externalLink" href="https://github.com/ist-dresden/composum-dashboard/tree/develop/aem/config/src/main/content/jcr_root/apps/composum/dashboard/config.composum"><code>sling/config/src/main/content/jcr_root/apps/composum/dashboard/config.composum</code></a></li>
<li><a class="externalLink" href="https://github.com/ist-dresden/composum-dashboard/tree/develop/sling/config/src/main/content/jcr_root/apps/composum/dashboard/config.composum"><code>aem/config/src/main/content/jcr_root/apps/composum/dashboard/config.composum</code></a></li>
</ul>
<p>These contain the <code>sling.servlet.paths</code> settings to make the dashboard available at
http(s)://{host}:{port}/apps/cpm/dashboard.html and the JCR browser at
http(s)://{host}:{port}/apps/cpm/browser.html .
If the second <a href="configurationAsContent.html">configuration as content page</a> is used, the likely
should be removed from these example configurations.</p>
<p><i>Caution:</i> Please remember to set appropriate ACL to make the dashboard only visible to the appropriate users.</p><section>
<h2><a name="General_configuration"></a>General configuration</h2>
<p>Only configured services are available.
The user interface is automatically set up with the configured services.
Services that are not configured are not displayed.</p>
<p>Each service implements bsically a servlet with a set of view or request options,
e.g. if the browsers XML view is configured via OSGi with</p>
<p><code>com.composum.sling.dashboard.servlet.DashboardXmlView.cfg.json</code>&#x2026;</p>

<div class="source"><pre class="prettyprint"><code class="language-json">{
  &quot;maxDepth&quot;: 0,
  &quot;sourceMode&quot;: true,
  &quot;sling.servlet.paths&quot;: [
    &quot;/apps/cpm/browser/view/xml&quot;,
    &quot;/apps/cpm/browser/view/xml/view&quot;,
    &quot;/apps/cpm/browser/view/xml/form&quot;,
    &quot;/apps/cpm/browser/view/xml/load&quot;
  ]
}
</code></pre></div>
<p>This service is rendering its UI as a servlet via the configured paths with
<code>/apps/cpm/browser/view/xml.html</code> as the main URI to access the service and a set of
servlet paths for the various UI elements of this implementation.</p>
<p>The same service declares a set of resource types (which can be overridden via OSGi)
through which the service can be used like a normal Sling component to embed service into the
content of the repository.</p></section><section>
<h2><a name="The_DashboardManager_service"></a>The DashboardManager service</h2>
<p>The service always needed to use the dashboard components is the DashboardManager service,
which provides the central settings for each of the other services, nothing works without this service.</p>
<p><code>com.composum.sling.dashboard.service.SlingDashboardManager.cfg.json</code> (AEM variant)&#x2026;</p>

<div class="source"><pre class="prettyprint"><code class="language-json">{
  &quot;allowedPropertyPatterns&quot;: [
    &quot;^.*$&quot;
  ],
  &quot;disabledPropertyPatterns&quot;: [
    &quot;^rep:.*$&quot;,
    &quot;^.*[Pp]assword.*$&quot;
  ],
  &quot;allowedPathPatterns&quot;: [
    &quot;^/$&quot;,
    &quot;^/content(/.*)?$&quot;,
    &quot;^/conf(/.*)?$&quot;,
    &quot;^/apps(/.*)?$&quot;,
    &quot;^/libs(/.*)?$&quot;,
    &quot;^/etc(/.*)?$&quot;,
    &quot;^/var(/.*)?$&quot;,
    &quot;^/tmp(/.*)?$&quot;,
    &quot;^/mnt(/.*)?$&quot;,
    &quot;^/oak:index(/.*)?$&quot;,
    &quot;^/jcr:system(/.*)?$&quot;
  ],
  &quot;disabledPathPatterns&quot;: [
    &quot;.*/rep:.*&quot;,
    &quot;^(/.*)?/api(/.*)?$&quot;
  ],
  &quot;sortableTypes&quot;: [
    &quot;nt:folder&quot;,
    &quot;sling:Folder&quot;,
    &quot;cq:Component&quot;
  ],
  &quot;cssRunmodes&quot;: [
    &quot;author&quot;,
    &quot;publish&quot;
  ],
  &quot;contentPageType&quot;: &quot;[cq:Page]/jcr:content[cq:PageContent]&quot;,
  &quot;loginUri&quot;: &quot;/libs/granite/core/content/login.html&quot;
}
</code></pre></div>
<p>For easy and quick setup of the dashboard browser to display the resource properties
the following services are required:</p>
<ul>

<li>SlingDashboardManager</li>
<li>DashboardBrowserServlet</li>
<li>DashboardPropertiesView</li>
</ul></section><section>
<h2><a name="Predefined_Widgets_and_Tools"></a>Predefined Widgets and Tools</h2><section>
<h3><a name="The_Browser"></a>The Browser</h3>
<p>The browser implementation is a widget of type &#x2018;tool&#x2019;. The browser implements a &#x2018;page&#x2019; resource type and,
for internal use, a &#x2018;tree&#x2019;, a &#x2018;tool&#x2019; and a &#x2018;view&#x2019; with a &#x2018;form&#x2019; resource type.
The tree implementation is part of the browser widget, but the view implementations are not.</p>
<p>The available views themselves are also widgets implemented by their own servlets.
The browser determines the available views by querying the available widgets declared for the Browser context.
Each such widget available through the DashboardManager is displayed in the browser's view pane.</p>
<p>In addition, the browser arranges the service implementations of the &#x2018;Tool&#x2019; category in the browser's tool menu,
which is displayed in the browser above the view pane.</p>
<p>A complete Browser with all predefined element consists of the services:</p>
<ul>

<li>SlingDashboardManager</li>
<li>DashboardBrowserServlet</li>
</ul>
<p>with the view components:</p>
<ul>

<li>

<p>DashboardPropertiesView</p>
<p>to show the resource properties as table with links to follow the path properties</p>
</li>
<li>

<p>DashboardDisplayView</p>
<p>to show the resources rendered as HTML (component based resources) or in the appropriate format (assets)</p>
</li>
<li>

<p>DashboardCaConfigView</p>
<p>to show a set of configured CA configuration settings in the context of the current resource</p>
</li>
<li>

<p>DashboardJsonView</p>
<p>to show the current resource as JSON source code</p>
</li>
<li>

<p>DashboardXmlView</p>
<p>to show the current resource as XML content source code</p>
</li>
</ul>
<p>and the tools</p>
<ul>

<li>

<p>DashboardFavoritesTool</p>
<p>to mark resources as favorites and provide these favorites in configured short lists</p>
</li>
<li>

<p>DashboardQueryWidget</p>
<p>to search resources using SQL2, XPath or Text queries</p>
</li>
</ul>
<p>With the following configuration you can be opened the Browser using the URI <code>/apps/cpm/browser.html</code>
If you have prepared the browser as content as described above, both URIs can be used to open the browser.</p>
<p>If you do not want to provide the services through servlet paths,
you can remove all &#x201c;sling.servlet.paths&#x201d; from the OSGi configuration.
In that case you must prepare appropriate content for the Dashboard views.</p>

  com.composum.sling.dashboard.servlet.DashboardBrowserServlet.cfg.json

<div class="source"><pre class="prettyprint"><code class="language-json">{
  &quot;sling.servlet.paths&quot;: [
    &quot;/apps/cpm/browser&quot;,
    &quot;/apps/cpm/browser/page&quot;,
    &quot;/apps/cpm/browser/view&quot;,
    &quot;/apps/cpm/browser/form&quot;,
    &quot;/apps/cpm/browser/tool&quot;,
    &quot;/apps/cpm/browser/tree&quot;
  ]
}
</code></pre></div>


  com.composum.sling.dashboard.servlet.DashboardPropertiesView.cfg.json

<div class="source"><pre class="prettyprint"><code class="language-json">{
  &quot;sling.servlet.paths&quot;: [
    &quot;/apps/cpm/browser/view/properties&quot;,
    &quot;/apps/cpm/browser/view/properties/view&quot;
  ]
}
</code></pre></div>


  com.composum.sling.dashboard.servlet.DashboardDisplayView.cfg.json

<div class="source"><pre class="prettyprint"><code class="language-json">{
  &quot;loadDocuments&quot;: true,
  &quot;parameterFields&quot;: [
    &quot;name=wcmmode,label=wcmmode,type=select,options=:--|disabled|edit|preview&quot;
  ],
  &quot;sling.servlet.paths&quot;: [
    &quot;/apps/cpm/browser/view/display&quot;,
    &quot;/apps/cpm/browser/view/display/view&quot;,
    &quot;/apps/cpm/browser/view/display/form&quot;,
    &quot;/apps/cpm/browser/view/display/load&quot;
  ]
}
</code></pre></div>


  com.composum.sling.dashboard.servlet.DashboardCaConfigView.cfg.json

<div class="source"><pre class="prettyprint"><code class="language-json">{
  &quot;inspectedConfigurations&quot;: [
    &quot;&lt;your CA configuration implementation class names...&gt;&quot;
  ],
  &quot;sling.servlet.paths&quot;: [
    &quot;/apps/cpm/browser/view/caconfig&quot;,
    &quot;/apps/cpm/browser/view/caconfig/view&quot;
  ]
}
</code></pre></div>


  com.composum.sling.dashboard.servlet.DashboardJsonView.cfg.json

<div class="source"><pre class="prettyprint"><code class="language-json">{
  &quot;maxDepth&quot;: 0,
  &quot;sourceMode&quot;: true,
  &quot;sling.servlet.paths&quot;: [
    &quot;/apps/cpm/browser/view/json&quot;,
    &quot;/apps/cpm/browser/view/json/view&quot;,
    &quot;/apps/cpm/browser/view/json/form&quot;,
    &quot;/apps/cpm/browser/view/json/load&quot;
  ]
}
</code></pre></div>


  com.composum.sling.dashboard.servlet.DashboardXmlView.cfg.json

<div class="source"><pre class="prettyprint"><code class="language-json">{
  &quot;maxDepth&quot;: 0,
  &quot;sourceMode&quot;: true,
  &quot;sling.servlet.paths&quot;: [
    &quot;/apps/cpm/browser/view/xml&quot;,
    &quot;/apps/cpm/browser/view/xml/view&quot;,
    &quot;/apps/cpm/browser/view/xml/form&quot;,
    &quot;/apps/cpm/browser/view/xml/load&quot;
  ]
}
</code></pre></div>


  com.composum.sling.dashboard.servlet.DashboardFavoritesTool.cfg.json

<div class="source"><pre class="prettyprint"><code class="language-json">{
  &quot;favoriteGroups&quot;: [
    &quot;Pages=^/content/(?!(dam)/.*$)&quot;,
    &quot;Assets=^/content/(dam)/.*$&quot;
  ],
  &quot;sling.servlet.paths&quot;: [
    &quot;/apps/cpm/browser/favorites&quot;,
    &quot;/apps/cpm/browser/favorites/view&quot;
  ]
}
</code></pre></div>


  com.composum.sling.dashboard.servlet.DashboardQueryWidget.cfg.json

<div class="source"><pre class="prettyprint"><code class="language-json">{
  &quot;queryTemplates&quot;: [
    &quot;&lt;your set of frequently used queries for your project...&gt;&quot;
  ],
  &quot;maxResults&quot;: 500,
  &quot;sling.servlet.paths&quot;: [
    &quot;/apps/cpm/query&quot;,
    &quot;/apps/cpm/query/page&quot;,
    &quot;/apps/cpm/query/view&quot;,
    &quot;/apps/cpm/query/find&quot;
  ]
}
</code></pre></div>
</section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2023..</p>
        </div>
      </div>
    </footer>
  </body>
</html>
